<!doctype html>
<html class="no-js" lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>我的账户</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- all css here -->
        <!-- bootstrap v3.3.6 css -->
        <link rel="stylesheet" href="front-end/css/bootstrap.min.css">
        <!-- animate css -->
        <link rel="stylesheet" href="front-end/css/animate.css">
        <!-- jquery-ui.min css -->
        <link rel="stylesheet" href="front-end/css/jquery-ui.min.css">
        <!-- meanmenu css -->
        <link rel="stylesheet" href="front-end/css/meanmenu.min.css">
        <!-- nivo slider css -->
        <link rel="stylesheet" href="front-end/lib/css/nivo-slider.css" type="text/css" />
        <link rel="stylesheet" href="front-end/lib/css/preview.css" type="text/css" />
        <!-- owl.carousel css -->
        <link rel="stylesheet" href="front-end/css/owl.carousel.css">
        <!-- font-awesome css -->
        <link rel="stylesheet" href="front-end/css/font-awesome.min.css">
        <!-- style css -->
        <link rel="stylesheet" href="front-end/style.css">
        <!-- responsive css -->
        <link rel="stylesheet" href="front-end/css/responsive.css">
        <!-- modernizr js -->
        <script src="front-end/js/vendor/modernizr-2.8.3.min.js"></script>
        <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
        <!-- Font Awesome -->
        <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">
        <!-- Ionicons -->
        <link rel="stylesheet" href="bower_components/Ionicons/css/ionicons.min.css">
        <!-- Theme style -->
        <link rel="stylesheet" href="dist/css/AdminLTE.min.css">
        <!-- AdminLTE Skins. Choose a skin from the css/skins
             folder instead of downloading all of them to reduce the load. -->
        <link rel="stylesheet" href="dist/css/skins/_all-skins.min.css">
    </head>
    <body>
        <!--header top area start-->
        <div th:replace="/common/front-end/header :: myheader"></div>
        <!--header area end-->
        <!--social design arae start-->
        <div th:replace="/common/front-end/link :: link"></div>
        <!--social design arae end-->
        <!-- shop area start-->
        <div class="shop_area">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="shop_menu shop_menu_tk ">
                            <ul class="cramb_area cramb_area_2 cramb_area_ktp">
                                <li><a href="index.html">首页 /</a></li>
                                <li><a href="/account">我的账号</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- shop area end-->
        <!--my account area start-->
        <div class="my_account_area">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <!-- Content Header (Page header) -->
                        <section class="content-header">
                            <h1>
                                个人资料
                            </h1>
                            <ol class="breadcrumb">
                                <li><a href="/"><i class="fa fa-dashboard"></i> 首页</a></li>
                                <li class="active">我的账户</li>
                            </ol>
                        </section>

                        <!-- Main content -->
                        <section class="content">

                            <div class="row">
                                <div class="col-md-3">

                                    <!-- Profile Image -->
                                    <div class="box box-primary">
                                        <div class="box-body box-profile">
                                            <img class="profile-user-img img-responsive img-circle" src="../../dist/img/user1-128x128.jpg" alt="User profile picture">

                                            <h3 class="profile-username">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[${session.loginUser.nickName}]]</h3>

                                            <p class="text-muted text-center">我是大帅哥</p>

                                            <ul class="list-group list-group-unbordered">
                                                <li class="list-group-item">
                                                    <b>我的钱包</b> <a class="pull-right">[[${wallet.balance}]]</a>
                                                </li>
                                                <li class="list-group-item">
                                                    <b>我的订单</b> <a class="pull-right">44</a>
                                                </li>
                                                <li class="list-group-item">
                                                    <b>总共花费</b> <a class="pull-right">13,287</a>
                                                </li>
                                            </ul>

                                            <a href="#" class="btn btn-primary btn-block"><b>查看订单</b></a>
                                        </div>
                                        <!-- /.box-body -->
                                    </div>
                                    <!-- /.box -->

                                    <!-- About Me Box -->
                                    <div class="box box-primary">
                                        <div class="box-header with-border">
                                            <h3 class="box-title">关于 我</h3>
                                        </div>
                                        <!-- /.box-header -->
                                        <div class="box-body">
                                            <strong><i class="fa fa-map-marker margin-r-5"></i> 购物地址</strong>

                                            <p class="text-muted">
                                                四川轻化工大学计算机学院计科X班
                                            </p>

                                            <hr>


                                            <strong><i class="fa fa-pencil margin-r-5"></i> 喜欢的商品</strong>

                                            <p>
                                                <span class="label label-danger">大刀肉</span>
                                                <span class="label label-success">Iphone 11 Pro</span>
                                                <span class="label label-info">花花公子</span>
                                                <span class="label label-warning">帅气的我</span>
                                            </p>

                                            <hr>

                                            <strong><i class="fa fa-file-text-o margin-r-5"></i> 个性签名</strong>

                                            <p>暂时未实现</p>
                                        </div>
                                        <!-- /.box-body -->
                                    </div>
                                    <!-- /.box -->
                                </div>
                                <!-- /.col -->
                                <div class="col-md-9">
                                    <div class="nav-tabs-custom">
                                        <ul class="nav nav-tabs">
                                            <li class="active"><a href="#activity" data-toggle="tab">我的订单</a></li>
                                            <li ><a href="#timeline" data-toggle="tab">我的钱包</a></li>
                                            <li><a href="#settings" data-toggle="tab">修改信息</a></li>
                                        </ul>
                                        <div class="tab-content">
                                            <div class="active tab-pane" id="activity">
                                                    <ul class="timeline timeline-inverse">
                                                        <!-- timeline time label -->
                                                        <li class="time-label">
                        <span class="bg-red">
                          10 Feb. 2014
                        </span>
                                                        </li>
                                                        <!-- /.timeline-label -->
                                                        <!-- timeline item -->
                                                        <li>
                                                            <i class="fa fa-envelope bg-blue"></i>

                                                            <div class="timeline-item">
                                                                <span class="time"><i class="fa fa-clock-o"></i> 12:05</span>

                                                                <h3 class="timeline-header"><a href="#">Support Team</a> sent you an email</h3>

                                                                <div class="timeline-body">
                                                                    Etsy doostang zoodles disqus groupon greplin oooj voxy zoodles,
                                                                    weebly ning heekya handango imeem plugg dopplr jibjab, movity
                                                                    jajah plickers sifteo edmodo ifttt zimbra. Babblely odeo kaboodle
                                                                    quora plaxo ideeli hulu weebly balihoo...
                                                                </div>
                                                                <div class="timeline-footer">
                                                                    <a class="btn btn-primary btn-xs">Read more</a>
                                                                    <a class="btn btn-danger btn-xs">Delete</a>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <!-- END timeline item -->
                                                        <!-- timeline item -->
                                                        <li>
                                                            <i class="fa fa-user bg-aqua"></i>

                                                            <div class="timeline-item">
                                                                <span class="time"><i class="fa fa-clock-o"></i> 5 mins ago</span>

                                                                <h3 class="timeline-header no-border"><a href="#">Sarah Young</a> accepted your friend request
                                                                </h3>
                                                            </div>
                                                        </li>
                                                        <!-- END timeline item -->
                                                        <!-- timeline item -->
                                                        <li>
                                                            <i class="fa fa-comments bg-yellow"></i>

                                                            <div class="timeline-item">
                                                                <span class="time"><i class="fa fa-clock-o"></i> 27 mins ago</span>

                                                                <h3 class="timeline-header"><a href="#">Jay White</a> commented on your post</h3>

                                                                <div class="timeline-body">
                                                                    Take me to your leader!
                                                                    Switzerland is small and neutral!
                                                                    We are more like Germany, ambitious and misunderstood!
                                                                </div>
                                                                <div class="timeline-footer">
                                                                    <a class="btn btn-warning btn-flat btn-xs">View comment</a>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <!-- END timeline item -->
                                                        <!-- timeline time label -->
                                                        <li class="time-label">
                        <span class="bg-green">
                          3 Jan. 2014
                        </span>
                                                        </li>
                                                        <!-- /.timeline-label -->
                                                        <!-- timeline item -->
                                                        <li>
                                                            <i class="fa fa-camera bg-purple"></i>

                                                            <div class="timeline-item">
                                                                <span class="time"><i class="fa fa-clock-o"></i> 2 days ago</span>

                                                                <h3 class="timeline-header"><a href="#">Mina Lee</a> uploaded new photos</h3>

                                                                <div class="timeline-body">
                                                                    <img src="http://placehold.it/150x100" alt="..." class="margin">
                                                                    <img src="http://placehold.it/150x100" alt="..." class="margin">
                                                                    <img src="http://placehold.it/150x100" alt="..." class="margin">
                                                                    <img src="http://placehold.it/150x100" alt="..." class="margin">
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <!-- END timeline item -->
                                                        <li>
                                                            <i class="fa fa-clock-o bg-gray"></i>
                                                        </li>
                                                    </ul>
                                            </div>
                                            <!-- 我的钱包 -->
                                            <div class="tab-pane" id="timeline">
                                                <div class="row">
                                                    <div class="col-lg-6 col-xs-6">
                                                    <!-- small box -->
                                                    <div class="small-box bg-aqua">
                                                        <div class="inner">
                                                            <h3>[[${wallet.balance}]]</h3>

                                                            <p>我的余额</p>
                                                        </div>
                                                        <div class="icon">
                                                            <i class="fa fa-cny"></i>
                                                        </div>
                                                        <a href="#" class="small-box-footer">
                                                            More info <i class="fa fa-arrow-circle-right"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                                    <!-- ./col -->
                                                    <div class="col-lg-6 col-xs-6">
                                                        <!-- small box -->
                                                        <div class="small-box bg-green">
                                                            <div class="inner">
                                                                <h3>80<sup style="font-size: 20px">%</sup></h3>

                                                                <p>会员折扣</p>
                                                            </div>
                                                            <div class="icon">
                                                                <i class="glyphicon glyphicon-sort-by-attributes-alt"></i>
                                                            </div>
                                                            <a href="#" class="small-box-footer">
                                                                More info <i class="fa fa-arrow-circle-right"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                    <!-- ./col -->
                                                    <div class="col-lg-6 col-xs-6">
                                                        <!-- small box -->
                                                        <div class="small-box bg-yellow">
                                                            <div class="inner">
                                                                <h3>44</h3>

                                                                <p>我的订单数</p>
                                                            </div>
                                                            <div class="icon">
                                                                <i class="fa fa-clone "></i>
                                                            </div>
                                                            <a href="#" class="small-box-footer">
                                                                More info <i class="fa fa-arrow-circle-right"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                    <!-- ./col -->
                                                    <div class="col-lg-6 col-xs-6">
                                                        <!-- small box -->
                                                        <div class="small-box bg-red">
                                                            <div class="inner">
                                                                <h3>65</h3>

                                                                <p>愿望单的总数</p>
                                                            </div>
                                                            <div class="icon">
                                                                <i class="glyphicon glyphicon-heart-empty"></i>
                                                            </div>
                                                            <a href="#" class="small-box-footer">
                                                                More info <i class="fa fa-arrow-circle-right"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- /.我的钱包 -->
                                            <!--修改信息 -->
                                            <div class="tab-pane" id="settings">
                                                <form class="form-horizontal">
                                                    <div class="form-group">
                                                        <label for="username" class="col-sm-2 control-label" >用&nbsp;&nbsp;户&nbsp;&nbsp;名</label>

                                                        <div class="col-sm-10">
                                                            <input type="text" class="form-control" id="username" placeholder="用户名" readonly="true" th:value="${session.loginUser.username}">
                                                        </div>
                                                        <div class="col-sm-10">
                                                            <input type="hidden" class="form-control" id="uid"  th:value="${session.loginUser.id}">
                                                        </div>
                                                        <div class="col-sm-10">
                                                            <input type="hidden" class="form-control" id="utype"  th:value="${session.loginUser.type}">
                                                        </div>
                                                        <div class="col-sm-10">
                                                            <input type="hidden" class="form-control" id="ustatus"  th:value="${session.loginUser.status}">
                                                        </div>
                                                        <div class="col-sm-10">
                                                            <input type="hidden" class="form-control" id="udate"  th:value="${session.loginUser.createTime}">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="nickName" class="col-sm-2 control-label">昵&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;称</label>

                                                        <div class="col-sm-10">
                                                            <input type="text" class="form-control" id="nickName" placeholder="昵&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;称" th:value="${session.loginUser.nickName}">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="phone" class="col-sm-2 control-label">手&nbsp;&nbsp;机&nbsp;&nbsp;号</label>

                                                        <div class="col-sm-10">
                                                            <input type="tel" class="form-control" id="phone" placeholder="手机号" th:value="${session.loginUser.phone}">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="pwd1" class="col-sm-2 control-label">密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码</label>
                                                        <div class="col-sm-10">
                                                            <input type="password" class="form-control" id="pwd1" placeholder="密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="pwd2" class="col-sm-2 control-label">确认密码</label>
                                                        <div class="col-sm-10">
                                                            <input type="password" class="form-control" id="pwd2" placeholder="确认密码">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="adress" class="col-sm-2 control-label" >收货地址</label>

                                                        <div class="col-sm-10">
                                                            <input type="text" class="form-control" id="adress" placeholder="收货地址"  th:value="${session.loginUser.address}">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <div class="col-sm-offset-2 col-sm-10">
                                                            <div class="checkbox">
                                                                <label>
                                                                    <input type="checkbox" id="agree"> 我同意 <a id="rules" style="color: #3d62f5">条款和协议</a>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <div class="col-sm-offset-2 col-sm-10">
                                                            <button type="button" id="setting-btn" class="btn btn-danger">提交</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <!-- /.tab-pane -->
                                        </div>
                                        <!-- /.tab-content -->
                                    </div>
                                    <!-- /.nav-tabs-custom -->
                                </div>
                                <!-- /.col -->
                            </div>
                            <!-- /.row -->

                        </section>
                        <!-- /.content -->
                    </div>

                </div>
                <div class="new-meta">
                    <a class=" btn btn-default btn-default-tf" href="">
                        <i class="fa fa-pencil"></i>
                    </a>
                </div>
            </div>
        </div>
        <!--my account area end-->
        <!--newsletter area start-->
        <div class="all_news_letter">
            <div class="news_letter">
                <div class="news_middele">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="news_heading">
                                    <h3> newsletter </h3>
                                </div>
                                <div class="full_form">
                                    <form id="form-newsletter1" class="widget_wysija" method="post" action="#wysija">
                                        <p class="wysija-paragraph">
                                            <input name="wysija[user][email]" class="wysija-input validate[required,custom[email]]" title="Enter Your Mail..." placeholder="Enter Your Mail..." value="" id="form-validation-field-0" style="" type="text">
                                        </p>
                                        <input class="wysija-submit wysija-submit-field" value="Subscribe!" type="submit">
                                    </form>
                                </div>
                            </div>
                            <div class="col-md-6 col-xs-12">
                                <div class="news_right">
                                    <div class="news_heading news_heading_3">
                                        <h3>Follow us:</h3>
                                    </div>
                                    <ul class="social-icons">
                                        <li>
                                            <a class="facebook social-icon" href="#facebook" title="" target="_blank" data-toggle="tooltip" data-original-title="Facebook">
                                            <i class="fa fa-facebook"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="twitter social-icon" href="#twitter.com" title="" target="_blank" data-toggle="tooltip" data-original-title="Twitter">
                                            <i class="fa fa-twitter"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="google-plus social-icon" href="#google-plus" title="" target="_blank" data-toggle="tooltip" data-original-title="Google-plus">
                                            <i class="fa fa-google-plus"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="youtube social-icon" href="#youtube" title="" target="_blank" data-toggle="tooltip" data-original-title="Youtube">
                                            <i class="fa fa-youtube"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="social-icon instagram" href="#" title="" target="_blank" data-toggle="tooltip" data-original-title="instagram">
                                            <i class="fa fa-instagram"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--newsletter area end-->
        <!--footer top area start-->
        <div th:replace="/common/front-end/footer :: footer"></div>
        <!--footer middle area end-->







        <!-- all js here -->
        <!-- jquery latest version -->
        <script src="front-end/js/vendor/jquery-1.12.0.min.js"></script>
        <!-- bootstrap js -->
        <script src="front-end/js/bootstrap.min.js"></script>
        <!-- nivo slider js -->
        <script src="front-end/lib/js/jquery.nivo.slider.js" type="text/javascript"></script>
        <script src="front-end/lib/home.js" type="text/javascript"></script>
        <!-- owl.carousel js -->
        <script src="front-end/js/owl.carousel.min.js"></script>
        <!-- meanmenu js -->
        <script src="front-end/js/jquery.meanmenu.js"></script>
        <!-- jquery-ui js -->
        <script src="front-end/js/jquery-ui.min.js"></script>
        <!-- easing js -->
        <script src="front-end/js/jquery.easing.1.3.js"></script>
        <!-- mixitup js -->
        <script src="front-end/js/jquery.mixitup.min.js"></script>
        <!-- jquery.countdown js -->
        <script src="front-end/js/jquery.countdown.min.js"></script>
        <!-- wow js -->
        <script src="front-end/js/wow.min.js"></script>
        <!-- popup js -->
        <script src="front-end/js/jquery.magnific-popup.min.js"></script>
        <!-- plugins js -->
        <script src="front-end/js/plugins.js"></script>
        <!-- main js -->
        <script src="front-end/js/main.js"></script>
    </body>
</html>
<script src="layer/layer.js"></script>
<script>
    $("#username").click(
        function () {
            layer.tips('用户名不可修改', '#username');
        }
    )
    $(function () {
        $("#setting-btn").click(function () {
            var check = document.getElementById("agree");
            if(check.checked){
                //第一、验证用户名是否存在
                var name = $("#username").val();
                var pwd1 = $("#pwd1").val();
                var nickName = $("#nickName").val();
                var phone = $("#phone").val();
                var adress = $("#adress").val();
                console.log(name)
                console.log(pwd1)
                console.log(nickName)
                console.log(phone)
                console.log(adress)
                if(pwd1==null||pwd1==""||nickName==null||nickName==""||phone==null||phone==""||adress==null||adress==""){
                    layer.msg('所有信息不能为空，请检查',{icon:2,time:3000})
                }else{
                    //验证密码一致
                    //假如密码一致
                    //发送注册请求
                    $.ajax({
                        url: "/userupdate",
                        type: "post",//post请求一定是携带json数据
                        contentType: "application/json",
                        data: JSON.stringify({"id":$("#uid").val(),"username":name,"password":$("#pwd1").val(),"nickName":$("#nickName").val(),"phone":$("#phone").val(),"address":adress,"status":$("#ustatus").val(),"type":$("#utype").val(),"createTime":$("#udate").val()}),
                        success: function (res) {
                            if(res){
                                //表示更新成功，弹出框提示，然后跳转到登录
                                layer.msg('更新成功，请重新登录',{icon:1,time:700},function () {
                                    window.location = "/tologin";
                                })
                            }else {
                                //表示更新失败，弹出框提示，然后继续尝试
                                layer.msg('更新失败，请稍后再试',{icon:2,time:3000})
                            }
                        }
                    })
                }

            }else {
                layer.alert('请认真阅读注册款项', {
                    icon: 0,
                    skin: 'layer-ext-moon'
                })
            }
        })
    });
    $("#rules").click(function () {
        layer.alert('所有解释权归本公司所有', {
            skin: 'layui-layer-molv' //样式类名
            ,closeBtn: 0
        }, function(){
            layer.alert('请仔细检查信息，其他还未想好', {
                skin: 'layui-layer-lan'
                ,closeBtn: 0
                ,anim: 4 //动画类型
            });
        });
    })
</script>

